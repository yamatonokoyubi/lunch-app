<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>パスワード再設定 - 弁当注文システム</title>
    <link rel="stylesheet" href="/static/css/common.css">
    <link rel="stylesheet" href="/static/css/password_reset.css">
</head>
<body>
    <div class="container">
        <div class="reset-box">
            <div class="header">
                <h1>🍱 Bento Order System</h1>
                <h2>新しいパスワードの設定</h2>
            </div>

            <div class="password-requirements">
                <p><strong>パスワードの要件:</strong></p>
                <ul>
                    <li>6文字以上</li>
                    <li>推奨: 英数字と記号を組み合わせる</li>
                </ul>
            </div>

            <form id="reset-confirm-form">
                <input type="hidden" id="reset-token" name="token">

                <div class="form-group password-toggle">
                    <label for="new-password">新しいパスワード</label>
                    <input 
                        type="password" 
                        id="new-password" 
                        name="new_password" 
                        required
                        minlength="6"
                        placeholder="新しいパスワードを入力"
                        autocomplete="new-password"
                    >
                    <button type="button" class="toggle-btn" id="toggle-password-1" aria-label="パスワードを表示">
                        👁️
                    </button>
                    <span class="error-message" id="password-error"></span>
                </div>

                <div class="form-group password-toggle">
                    <label for="confirm-password">パスワード(確認)</label>
                    <input 
                        type="password" 
                        id="confirm-password" 
                        name="confirm_password" 
                        required
                        minlength="6"
                        placeholder="もう一度入力してください"
                        autocomplete="new-password"
                    >
                    <button type="button" class="toggle-btn" id="toggle-password-2" aria-label="パスワードを表示">
                        👁️
                    </button>
                    <span class="error-message" id="confirm-error"></span>
                </div>

                <button type="submit" class="btn-primary" id="submit-btn">
                    パスワードを変更
                </button>

                <div class="loading-message" id="loading-message" style="display: none;">
                    <div class="spinner"></div>
                    <p>変更中...</p>
                </div>

                <div class="success-message" id="success-message" style="display: none;">
                    <p>✅ パスワードを変更しました。</p>
                    <p>新しいパスワードでログインしてください。</p>
                </div>

                <div class="error-box" id="error-box" style="display: none;">
                    <p id="error-text"></p>
                </div>
            </form>

            <div class="links">
                <a href="/login">ログイン画面に戻る</a>
            </div>
        </div>
    </div>

    <script src="/static/js/password_reset_confirm.js"></script>
</body>
</html>
